# rails-cpu-checker
 
Mac(M1プロセッサ)にてrailsを動かしているとCPU使用率が高くなる。

springライブラリを除外することが簡単な対処である。

しかし、そうできない環境もある。そのため、このアプリを作った。

このアプリは、CPU使用率が高くなると音声で、そのことを通知する。


# インストール

Rubyがインストールされていれば動くはず。

Gemも使っていないのでbundle installも不要です。

必要なファイルは次のようになります。
```
rails-cpu-checker.rb
+-- helper
    +-- common.rb
    +-- ps.rb
```

# 実行

ターミナルで次のコマンドを実行する。
```
ruby rails-cpu-checker.rb
```
停止方法は「Ctrl + C」で強制停止してください。

無限ループで実行しています。


# アンインストール

rails-cpu-checker.rb を削除していただければ問題ありません。


# 動作の詳細

10秒周期でPSコマンドを実行しています。

PSコマンドのCPU使用率をチェックして、60%以上になっているプロセスを見つけます。

また、それのプロセスが「spring/application/boot」である場合に次の動作をします。

 * 現在日時を表示します。
 * PSコマンドの取得内容を表示します。
 * 音声で確認を促します。